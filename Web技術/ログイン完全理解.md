# HTTP通信の性質  

ログイン機能を使用するときは、ログインという ***「状態」*** を保ったまま次のリクエストを返さないといけない。しかし、HTTP通信は***ステートレス***
な通信であるため、「状態」を保ったままでいることはできない。（ちなみにFTPはステートフルな通信。）  

# Cookie  

先ほど言ったHTTPの弱点である「状態」記録できない。これを解決してるのが***Cookie***だ。  
Cookieはメッセージヘッダに入れられて送られるため、外から簡単にわかるものでない。  
>Cookieの流れ  
1.ログイン画面からpostリクエスト。ユーザー情報を送信。  
2.レスポンスの際に、Set-cookieにpostリクエストで受け取った情報をわたす。Set-cookieはメッセージヘッダの中にある。  
3.カートの中の商品などを見るときに、メッセージヘッダの中にCookieをいれリクエスト送信。  
>4.ユーザを認識。ユーザーのカート情報を送る。  

違うサーバーにリクエストを送るときは、もちろんCookieは送られないよ！！

# Session

上記のCookieで「状態」は保つことができた！だが、しかしこのままでは、セキュリティ的に安全ではない。  
Cookieにユーザーの情報がそのまま入ってたりすると、それを何らかの方法で見つけた人が悪用するかもしれない。  
そこで、もっと安全に多くの情報を保持するために***セッション***という仕組みだ。  
また、ログインしてからログアウトしてまでの***一連の処理***もセッションという。  
セッションの進行状況を管理するためには、何かしら付随するするものが必要。  
そこで、***セッション状態の管理はWebサーバー側***でして、クライアントとは銀行の窓口のように受付番号だけををやり取りするようにしている。  
その受付番号が、***セッションID***と呼ばれるものだ。

### まとめ  

CookieとかSessionとか分かりずらいと思うが、要はCookieの中に直接データを入れるのは危ないから、代わりにセッションIDをいれ、
そのCookieをやり取りすることでログインユーザーを認識しようって話。  
半年間やってきてずっと曖昧だったとこが、「Web技術の基本」、「プロになるためのWeb技術入門」と
だいそんさんのおかげで自分でも納得して理解することができた！！
