# アセットパイプライン  

### アセットパイプラインとはなんぞや？  
だいぶ理解していなかったので、勉強してみた。

アセットパイプラインの役割は、css、javascript,画像などのassetディレクトリ内のファイルを**結合・圧縮**させる
役割を持つ。
css,js,imageディレクトリの中には、複数のファイルがあるが、それをWebブラウザ側は結合・圧縮できないから、アセットパイプラインが事前にする。

### 注意すること  

アセットパイプラインは、開発環境では勝手に実行されるが、**本番環境では実行されないため,config/environments/production.rbの
config.assets.compile = falseをtrueに書き換えないといけない**。

### アセットパイプラインの流れ  

**1.高級言語のコンパイル**
**2.連結**
**3.圧縮**
**4.pubulicディレクトリに配置**  
この一連の流れを**アセットプリコンパイル**と言うらしい。 アセットパイプラインが実現するためには、**sprockets**と言うgemが必要。

詳しく説明していく。  
#### 1.高級言語のコンパイル  
assetディレクトリの中身は、scss,coffeescriptなどのファイルがあるため、そのsassやcoffeなどの高級言語をcssやjavascriptの言語にコンパイルする。  

#### 2.連結  
**app/assets/stylesheets/application.css.scss**と**app/assets/javascripts/application.js**の二つのフィルがcssファイルや
jsファイルの連結を行っている。それらのファイルの中の```//require_tree.```が連結の重要な役割を担っている。

#### 3.圧縮
複数行のcssなどを１行に圧縮している。そのおかげで、書きやすく、読み込みが早い仕組みになっている。

#### 4.ブラウザへの反映  
layoutsファイルの
```
<%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
<%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
```
この２行がブラウザへの反映を担っている。

(参考サイト)[https://diveintocode.jp/blogs/Technology/AssetPipeline]

今日は、時間がなくて思いのほか進まなく、アプリ設計まで手が回らなかった。アセットパイプラインの理解までできたので、最低限はできたかなと言う感じ。
ただ、参考サイトと現場railsでちょっと違う気がするのでもう一回、明日見直したい。(manifestファイルとかが出てこなかった。)
